schemaVersion: 1.0
name: CodeX API
version: 1.0.0
displayName: CodeX API Service
description: Execute code in various programming languages and retrieve supported languages information.
type: REST

endpoints:
  - name: executeCode
    type: http
    port: 3000
    basePath: /
    visibility: PUBLIC

  - name: getSupportedLanguages
    type: http
    port: 3000
    basePath: /list
    visibility: PUBLIC

configuration:
  auth:
    type: NONE

  inputs:
    properties:
      - name: language
        type: string
        required: true
      - name: code
        type: string
        required: true
      - name: input
        type: string
        required: false
      - name: timeout
        type: integer
        default: 30

  outputs:
    properties:
      - name: output
        type: string
      - name: error
        type: string
      - name: supported_languages
        type: array
        items:
          type: object
          properties:
            - name: language
              type: string
            - name: info
              type: string

execution:
  steps:
    - name: executeCode
      action:
        type: HTTP
        url: http://localhost:3000/
        method: POST
      response:
        - when: "200"
          set:
            outputs.output: "$.output"
            outputs.error: "$.error"
    - name: getSupportedLanguages
      action:
        type: HTTP
        url: http://localhost:3000/list
        method: GET
      response:
        - when: "200"
          set:
            outputs.supported_languages: "$.supportedLanguages"
